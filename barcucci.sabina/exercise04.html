<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Name Surname">
    <link rel="icon" href="media/favicon.ico">

    <title>Fab Academy 2015 - Sabina Barcucci </title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
      
 <link href="media/fabacademy.css" rel="stylesheet">       <link href="media/SABINA.css" rel="stylesheet">     <link href='http://fonts.googleapis.com/css?family=Karla:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
    
    <!-- 3D files viewer -->
    <script type="text/javascript" src="media/jsc3d_ie.min.js"></script>
	<script type="text/javascript" src="media/jsc3d.min.js"></script>
    <script type="text/javascript" src="media/jsc3d.webgl.js"></script>
    <script type="text/javascript" src="media/jsc3d.touch.js"></script>

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="bootstrap/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="bootstrap/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- Load the menu file -->
    <script>
	function menu() {
					  $('#exercises').load("exercises-menu.html");
					  $('#project').load("project-menu.html");
					  $('#cclicense').load("license.html");
					  }
	</script>

  </head>

  <body onload="menu()">

    <!-- Static navbar -->
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">Sabina Barcucci</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="about.html">About</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Modules <span class="caret"></span></a>
              <ul id="exercises" class="dropdown-menu" role="menu">
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Breathing Pod <span class="caret"></span></a>
              <ul id="project" class="dropdown-menu" role="menu">
              </ul>
            </li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

	<!-- Insert your content here below! -->


    <h2><strong>Electronics production</strong></h1>
        <h3>FabISP </h3> <br> 
         <img src="img4/FabISP_Final_Final.jpg"/></a> <br> <br>
        
        
     <p>   
         <strong>For this assignment I experimented to mill both with Modela and I-Modela with FabISPKey and FabISP. I then soldered only the FabISP milled with I-Modela  </strong> 
         <br><br>
The FabISP is an in-system programmer for AVR microcontrollers, designed for production within a FabLab. It allows you to program the microcontrollers on other boards you make.The Neil's FabISP is based on <a href="http://fab.cba.mit.edu/content/projects/fabisp/">David Mellis's FabISP</a> which is based on <a href="http://www.ladyada.net/make/usbtinyisp/index.html">Limor's USBTinyISP</a> which is based on Dick Streefland's USBTiny. <br> <br>
         
         
         
</p>
        <h4>1 | pcb milling with Modela and Fab Modules </h4> <br>
      <p>
      For the pcb miling I decided frist to try fabricating the version 2.3 FabISPkey, based on <a href="http://fab.cba.mit.edu/content/projects/fabispkey/index.html">the design of Andy</a> in which the USB connector has been replaced with a board edge USB connector taken from the SparkFun library. 
        I downloaded the files in his page, the png version, in order to use the 
        <a href="http://fablab.muse.it/modela-mdx-20-0">Modela MDX 20 Roland</a> milling machine and Fab Modules as CAM. <br> <br>
 <img src="img4/my_fab_ISP.jpg"/></a> 
	<p>
	I previously downloaded the Fab Modules <a href="http://kokompe.cba.mit.edu/downloads.html">here</a>
and installed them on Ubuntu operating system. 

For the first phase of the Electronics production module, since the material supply of FR1 and electronics components for the FabISP wasn't available yet, I tried just to experimenting milling the pcb with the Modela MDX20, but using instead a piece of <a href="http://en.wikipedia.org/wiki/FR-2">FR2</a> that was available at my lab. I investigated about the toxicity of the board, and I discover that  it's actually quite toxic but and I took care of milling the FR2 wearing a mask. 
        As machine tool, since I had no 1/34 inches tool, I used a DIY burin that in the largest section has a diameter of 6 mm (as Modela MDX 20 tools show). Since the burin section is variable and moreover mine was DIY and unprecise, I couldn't establish a precise measure for its tool peak, and I had to test and retry the fabmodules settings many times in order to get a rapport between tool diameter and engrave depht close to reality. <br><br> <strong>Afterward, I learned how to calculate precisely the depht of a burin, as I will report in the milling tests I did with I-Modela. </strong>        
        <br> <br>
        Below the screenshot of the Fab Modules settings I used for the most acceptable pcb result I milled. 
        <img src="img4/MODELA_Traces_Fab_modules_fabisp4_traces_web.jpg"/>
        <img src="img4/MODELA_Interior_Fab_module_fabisp3_profile_web.jpg"/>
      </p>
<br> 
    <h4>2 | pcb milling with iModela and FabModules.org/beta </h4> <br>
      <p>
    To use the <a href="http://fablab.muse.it/i-modela">iModela</a> and setting it with <a href="http://fabmodules.org/">FabModule.org</a> we had several problem, most of all to understand how to set XYZ origin. We digged into the iModela gcode, the RML, using the <a href="https://itp.nyu.edu/classes/cdp-spring2014/files/2014/09/RML1_Manual.pdf">RML-1 Programming guideline to learn how to modify the GCode. </a> We didn't succeed, meaning even if we understood how generally the rml code is composed, we didn't find any place in which set up manually (with code) the XYZ origin. <br> <br> We proceeded finding this solution: we used the proprietary Roland controller that runs in Windows to manually set the Z origin, since the machine keep the setting also after rebooting it and then we switched the iModela to another laptop with Ubuntu installed, to generate the rml file and run the milling machine via Ubuntu.  
     <img src="img4/ROLAND_CONTROLLER.jpg"/>     
We donwloaded the two pngs with traces and interior to mill the circuits. 
          
          <img src="img4/hello.ISP.44.traces.png"width="20%" height="20%"/> Traces.png
          
          <img src="img4/hello.ISP.44.interior.png"width="20%" height="20%"/> Interior.png
          
          <br> <br>
        
          Since we were not provided with the prescribed end mill tool for the FabISP (1/34 inch diameter), we used an iModela burin converting it into an end mill tool. Below a recap on how to calculate these elements, a recap of the best settings we found for FabModule for iModela and a preview of our pcb milling tests. 
        <br> <br>
          <strong>Output #1 (Less engraving depth, more speed)</strong><br><br>

Speed: 1.4 mm/s<br>
Jog: 1 mm<br>
x=4<br>
y=4<br>
z=0<br><br>

Process<br><br>

Cut depth: 0.27 mm<br>
Tool diameter: 0.3 mm<br>
nr offsets: 10<br>
offsets overlap: 30%<br><br>

<strong>Output #2 (more engraving depth, less speed - to not to overload the machine)</strong><br><br>

Speed: 1 mm/s<br>
jog: 1 mm<br>
x=4<br>
y=4<br>
z=0<br><br>

Process <br><br>

Cut depth: 0.35 mm<br>
Tool diameters: 0.4 mm<br>
nr offsets: 7<br>
offsets overlap: 70%<br>
          
          <br>
        <br>
          
          
     <img src="img4/SCHEME_SETTINGS.jpg"/>      
          <img src="img4/ALL_THE_TESTS.jpg"/>  
    For the interior cut, we used the 1.6 mm iModela end mill. Below the result. 
          <br> <br> 
         <img src="img4/PCB_CUT_OFF.jpg"/>   
           <img src="img4/A_GOOD_MILLED_PCB.jpg"/>
          <br> <br>
          
          <h4>3 | pcb SMD soldering and stuffing </h4> <br>
    These are all the components required to stuff the FabISP <br><br>
    
    1 ATTiny 44 microcontroller<br>
    1 Capacitor 1uF<br>
    2 Capacitor 10 pF<br>
    2 Resistor 100 ohm<br>
    1 Resistor 499 ohm<br>
    1 Resistor 1K ohm<br>
    1 Resistor 10K<br>
    one 6 pin header<br>
<br><br>
	

    1 USB connector<br>
    2 jumpers - 0 ohm resistors<br>
    1 Cystal 20MHz<br>
    two Zener Diode 3.3 V<br>
    one usb mini cable<br>
    one ribbon cable<br>
    two 6 pin connectors<br><br>
    
    And this is the file we followed to organize components layout while soldering
    <br>
    <br>
    <img src="img4/hello.ISP.44.png"width="20%" height="20%"/> <br> <br>
    
    We prepared the pcb surface using by fluxing it in order to make tin flowing correclty within copper traces.
    <br> <br>
<img src="img4/Flux.jpg"/> <br> <br>
    Once recognized and arranged all the electronic components, the SMD soldering phase has started. <br> <br>
    <img src="img4/ELECTRONICS_COMPONENTS.jpg"/><br><br>
    Before actually start stuffing the board, we pre-tinned the pcb in every copper pads. Then, with the desolder braid, we removed the tin in excess, leaving the pcb surfaced pre-tinned and plane. 
 <br> <br>
<img src="img4/Pre_tinned_pcb.jpg"/> <br> <br>pre-tinned board<br><br>
<img src="img4/pre_tinned_de_soldered_pcb.jpg"/>
    <br><br> Pre-tinned desoldered board<br><br>
    After this process, we started soldering the USB connector, that was a quite complex step. We added more flux to make the tin flows more on the super tiny traces under the connector "racks". <br> <br>
<img src="img4/USB_CONNECTOR.jpg"/> <br> <br>
    Once stuffed allt he components on the board, I have got my resulting FabISP pcb. <br> <br>
    
    <img src="img4/My_FabISP_finshed.jpg"/> <br> <br>
     <img src="img4/FINAL_RESULT.jpg"/> <br> <br>
    
    <br> 
    <h4>3 | FabISP test / board remake </h4> <br>
    <p>
    Once we tried to program the FabISP using an other FabISP, we realized that our boards werent' working. The main problem resulted to be the milling process that wasn't filled. So, probably the amount of copper close to MSD components was to high and created problems with conductivity and circuit functioning. 
        <img src="img4/LST_MILL_FILL.jpg"/> <br> <br>
        
        <p>
    Below you can donwload the final files. Pay attention that we optimized milling process by doing two boards in one process. The pngs and the gcodes are then to produce two FabISP at once. <br> <br>
            Settings for iModela made with FabModules<br> <br> Traces<br>
Speed: 1.4 mm/s<br>
Jog: 1 mm<br>
x=4<br>
y=4<br>
z=0<br>
Cut depth: 0.27 mm<br>
Tool diameter: 0.3 mm<br>
nr offsets: -1<br>
offsets overlap: 70%<br><br>

Interior<br>
speed: 1.2 mm/s<br>
jog: 1 mm<br>
x=4<br>
y=4<br>
z=0<br>
cut depth: 0.5 mm<br>
stock thickness: 1.8 mm<br>
tool diameter: 1.6 mm
<br><br>
        
      
    
    <p>
	<a href="img4/FabISP_png_files.zip">
	<button type="button" class="btn btn-primary btn-lg">Grab the FabISP double png files</button>
	</a>
	</p>
    <br>
    <h4>4 | FabISP programming </h4> <br>
    <p>
       
    Following the Neil's tutorial, here the steps:<br>
    - USB power <br>
    - make clean<br>
    - make hex <br>

        - (sudo) make fuse (check programmer in Makefile, may need to repeat)<br>
         - (sudo) make program<br>
         - desolder SJ1 and SJ2<br>
         - make IDC ISP cable, connecting header pin 1 to pin 1, check wires<br>
<br>        
        
Outupt terminal FabISP:
        
        <pre class="prettyprint linenums">
	&ltpre class="prettyprint linenums"&gt;
	SabinaBarcucci-MacBook-Pro:fabISP_mac.0.8.2_firmware SabinaBarcucci$ sudo make fuse
avrdude -c stk500v1 -b19200 -P /dev/tty.usbmodem1411 -p attiny44 -U hfuse:w:0xDF:m -U lfuse:w:0xFF:m

avrdude: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.05s

avrdude: Device signature = 0x1e9207
avrdude: reading input file "0xDF"
avrdude: writing hfuse (1 bytes):

Writing | ################################################## | 100% 0.02s

avrdude: 1 bytes of hfuse written
avrdude: verifying hfuse memory against 0xDF:
avrdude: load data hfuse data from input file 0xDF:
avrdude: input file 0xDF contains 1 bytes
avrdude: reading on-chip hfuse data:

Reading | ################################################## | 100% 0.02s

avrdude: verifying ...
avrdude: 1 bytes of hfuse verified
avrdude: reading input file "0xFF"
avrdude: writing lfuse (1 bytes):

Writing | ################################################## | 100% 0.02s

avrdude: 1 bytes of lfuse written
avrdude: verifying lfuse memory against 0xFF:
avrdude: load data lfuse data from input file 0xFF:
avrdude: input file 0xFF contains 1 bytes
avrdude: reading on-chip lfuse data:

Reading | ################################################## | 100% 0.02s

avrdude: verifying ...
avrdude: 1 bytes of lfuse verified

avrdude: safemode: Fuses OK (E:FF, H:DF, L:FF)

avrdude done.  Thank you.

SabinaBarcucci-MacBook-Pro:fabISP_mac.0.8.2_firmware SabinaBarcucci$ sudo program
sudo: program: command not found
SabinaBarcucci-MacBook-Pro:fabISP_mac.0.8.2_firmware SabinaBarcucci$ sudo make program
avrdude -c stk500v1 -b19200 -P /dev/tty.usbmodem1411 -p attiny44 -U flash:w:main.hex:i

avrdude: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.05s

avrdude: Device signature = 0x1e9207
avrdude: NOTE: "flash" memory has been specified, an erase cycle will be performed
         To disable this feature, specify the -D option.
avrdude: erasing chip
avrdude: reading input file "main.hex"
avrdude: writing flash (1988 bytes):

Writing | ################################################## | 100% 3.44s

avrdude: 1988 bytes of flash written
avrdude: verifying flash memory against main.hex:
avrdude: load data flash data from input file main.hex:
avrdude: input file main.hex contains 1988 bytes
avrdude: reading on-chip flash data:

Reading | ################################################## | 100% 2.33s

avrdude: verifying ...
avrdude: 1988 bytes of flash verified

avrdude: safemode: Fuses OK (E:FF, H:DF, L:FF)

avrdude done.  Thank you.

avrdude -c stk500v1 -b19200 -P /dev/tty.usbmodem1411 -p attiny44 -U hfuse:w:0xDF:m -U lfuse:w:0xFF:m

avrdude: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.05s

avrdude: Device signature = 0x1e9207
avrdude: reading input file "0xDF"
avrdude: writing hfuse (1 bytes):

Writing | ################################################## | 100% 0.02s

avrdude: 1 bytes of hfuse written
avrdude: verifying hfuse memory against 0xDF:
avrdude: load data hfuse data from input file 0xDF:
avrdude: input file 0xDF contains 1 bytes
avrdude: reading on-chip hfuse data:

Reading | ################################################## | 100% 0.02s

avrdude: verifying ...
avrdude: 1 bytes of hfuse verified
avrdude: reading input file "0xFF"
avrdude: writing lfuse (1 bytes):

Writing | ################################################## | 100% 0.02s

avrdude: 1 bytes of lfuse written
avrdude: verifying lfuse memory against 0xFF:
avrdude: load data lfuse data from input file 0xFF:
avrdude: input file 0xFF contains 1 bytes
avrdude: reading on-chip lfuse data:

Reading | ################################################## | 100% 0.02s

avrdude: verifying ...
avrdude: 1 bytes of lfuse verified

avrdude: safemode: Fuses OK (E:FF, H:DF, L:FF)

avrdude done.  Thank you.

	&lt/pre&gt;</pre>
    
     <img src="img4/USBISP.jpg"/> <br>
      
<!--
To double check the pcb dimensions, I opened the png file with <a href="http://fabmodules.org/">FabModules.org</a> that provides dimensions in px, mm and inches. 

<br><br>
        <img src="img4/Fab_Modules_org_screenshot_dim.jpg"/></a> <br>
-->

	</p>
    
    <!--
    <h3>Text</h3>
	<p>
	You can set it up with:
	<pre class="prettyprint linenums">
	&ltp&gt;
	Your text here
	&lt/p&gt;</pre>
	</p>
	Result:
	<p>
	Your text here
	</p>
	
	<h3>Images</h3>
	<p>
	You can set it up with:
	<pre class="prettyprint linenums">
	&ltp class="pic&gt;>&ltimg src="http://academy.cba.mit.edu/2012/students/menichinelli.massimo/exercise07/exercise07_02.jpg"&gt;
	&ltlegend&gt;Here's the legend of the picture.&lt/legend&gt;
	&lt/p&gt;</pre>
	</p>
	Result:
	<p class="pic"><img src="http://academy.cba.mit.edu/2012/students/menichinelli.massimo/exercise07/exercise07_02.jpg">
	<legend>Here's the legend of the picture.</legend>
	</p>
     
	<h3>Code</h3>
	<p>
	You can set it up with:
	<pre class="prettyprint linenums">
	&ltpre class="prettyprint linenums"&gt;
	Your code here
	&lt/pre&gt;</pre>
	
	Result:
	<pre class="prettyprint linenums">
	for i in members:
		print ""
		print "USER:",members[i]
		print "Loading connections..."
		followers = load_connections([i], "followers")
		friends = load_connections([i], "friends")

		# Add edges...
		print "Building the graph..."

		for f in followers:
			for k in followers[f]:
				graph.add_edge(k,f)
	
		for f in friends:
			for k in friends[f]:
				graph.add_edge(f,k)</pre>
	</p>
	
	<h3>3D Model</h3>
	<p>	
	The model can be rotated and zoomed with the mouse/trackpad. You can set it up with:
	<pre class="prettyprint linenums">
	&ltcanvas id="cv" width=640 height=480&gt;
	It seems you are using an outdated browser that does not support canvas :-(
	&lt/canvas&gt;
	&ltscript type="text/javascript"&gt;
		var canvas = document.getElementById('cv');
		var viewer = new JSC3D.Viewer(canvas);
		viewer.setParameter('SceneUrl','media/monkey.stl');
		viewer.setParameter('ModelColor','#CAA618');
		viewer.setParameter('BackgroundColor1','#E5D7BA');
		viewer.setParameter('BackgroundColor2','#383840');
		viewer.setParameter('RenderMode','flat');
		viewer.setParameter('MipMapping','on');
		viewer.setParameter('Definition','high');
		viewer.setParameter('Renderer','webgl');
		viewer.init();
		viewer.update();
	&lt/script&gt;</pre>
	
	You can set up the path to the 3D model (.stl/.obj) within this line:
	<pre class="prettyprint linenums">
	viewer.setParameter('SceneUrl','media/monkey.stl');</pre>
	
	Result:
	<canvas id="cv" width=640 height=480>
	It seems you are using an outdated browser that does not support canvas :-(
	</canvas>
	<script type="text/javascript">
		var canvas = document.getElementById('cv');
		var viewer = new JSC3D.Viewer(canvas);
		viewer.setParameter('SceneUrl','media/monkey.stl');
		viewer.setParameter('ModelColor','#CAA618');
		viewer.setParameter('BackgroundColor1','#E5D7BA');
		viewer.setParameter('BackgroundColor2','#383840');
		viewer.setParameter('RenderMode','flat');
		viewer.setParameter('MipMapping','on');
		viewer.setParameter('Definition','high');
		viewer.setParameter('Renderer','webgl');
		viewer.init();
		viewer.update();
	</script> 
    </p> 
    
    <h3>Download</h3>
	<p>
	You can set up a button for files to be downloaded with:
	<pre class="prettyprint linenums">
	&lta href="#"&gt;
	&ltbutton type="button" class="btn btn-primary btn-lg">Download the file&lt/button&gt;
	&lt/a&gt;</pre>
	</p>
	
	<p>
	Result:
	</p>
	<p>
	<a href="#">
	<button type="button" class="btn btn-primary btn-lg">Download the file</button>
	</a>
	</p>
      
    <h3>Would you like to insert more style/elements?</h3>
      <p>
      Check the documentation of Bootstrap <a href="">here</a>.
-->
      </p>
    <!-- End of your content -->

    </div> <!-- /container -->

	<!-- footer -->
    
    <footer id="footer">
        <p id="cclicense">
                </p>
        <p class="license">
        Theme: <a href="https://github.com/openp2pdesign/FabAcademy_Template">Fab Academy Template</a> by <a href="http://openp2pdesign.org">Massimo Menichinelli</a> <br> modified by Sabina Barcucci
        Based on <a href="http://getbootstrap.com/">Twitter Bootstrap</a>+<a href="http://jquery.com/">JQuery</a>+<a href="https://code.google.com/p/google-code-prettify/">google-code-prettify</a>+<a href="http://jmblog.github.io/color-themes-for-google-code-prettify/github/">GitHub theme for google-code-prettify</a>+<a href="https://code.google.com/p/jsc3d/">JSC3D</a>+<a href="https://github.com/thegrubbsian/jquery.ganttView">jquery.ganttView</a>.
        </p>
    </footer>
    

	<!-- Do not touch this! -->
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="media/jquery-1.9.1.min.js"></script>
    
    <!-- Syntax Highlighter -->
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js">
    </script>
    <!-- From https://github.com/jmblog/color-themes-for-google-code-prettify -->
    <link href="media/github.css" type="text/css" rel="stylesheet">
	<script type="text/javascript">
	  !function ($) {
		$(function(){
		  window.prettyPrint && prettyPrint()   
		})
	  }(window.jQuery)
	</script>
	
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="bootstrap/js/ie10-viewport-bug-workaround.js"></script>

  </body>
</html>
