<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Name Surname">
    <link rel="icon" href="media/favicon.ico">

    <title>Fab Academy 2015 - Massimo Bianchini</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
<link href="media/fabacademy.css" rel="stylesheet">
         <link href="media/stilemassimo.css" rel="stylesheet"> 
      <link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    
    <!-- 3D files viewer -->
    <script type="text/javascript" src="media/jsc3d_ie.min.js"></script>
	<script type="text/javascript" src="media/jsc3d.min.js"></script>
    <script type="text/javascript" src="media/jsc3d.webgl.js"></script>
    <script type="text/javascript" src="media/jsc3d.touch.js"></script>

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="bootstrap/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="bootstrap/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- Load the menu file -->
    <script>
	function menu() {
					  $('#exercises').load("exercises-menu.html");
					  $('#project').load("project-menu.html");
					  $('#cclicense').load("license.html");
					  }
	</script>

  </head>

  <body onload="menu()">

    <!-- Static navbar -->
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">Massimo Bianchini</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="about.html">My profile</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Exercises <span class="caret"></span></a>
              <ul id="exercises" class="dropdown-menu" role="menu">
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Final Project <span class="caret"></span></a>
              <ul id="project" class="dropdown-menu" role="menu">
              </ul>
            </li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

	<!-- Insert your content here below! -->

   
<h2>Exercise 14 - Interface and Application Programming</h2>
    
<h3>Assignment</h3>
<p>Write an application that interfaces with an input and/or output device</p><br> 
    
<h3>Creating a DIY Bluetooth module and a basic interface</h3>
<p> I wanto to create a bluetooth board for my final project and test how it works detecting data from a sonar.
In parallel I will try to create a basic interface. Coding and programming is my real “Achilles heel”. I am a real beginners. Python and Processing seems to me almost black box. The final scope of this exercize is to create a Bluetooth board using a module and connecting it to a basic GUI which can confirm to me.Basic ideas is to create a bluetooth board using a MH-10 Bluetooth modules and soldering it on a DIY board specifically designed to be connected to a system. Before to make it, I studied some datasheets and search on the Web some tutorials.

<h3>Datasheet</h3><br>
<a href="ftp://imall.iteadstudio.com/Modules/IM130614001_Serial_Port_BLE_Module_Master_Slave_HM-10/DS_IM130614001_Serial_Port_BLE_Module_Master_Slave_HM-10.pdf" class="link_text">SERIAL PORT BLE MODULE (MASTER/SLAVE) HM-10 Model, code:IM130614001</a><br>

<img src="images/esercitazione14/bluetoothschematic.png">       

<h3>Tutorials</h3><br>
<a href="http://www.instructables.com/id/AT-command-mode-of-HC-05-Bluetooth-module/" class="link_text">AT command mode of HC-05 and HC-06 Bluetooth module</a><br>
<a href="http://mcuoneclipse.com/2013/06/19/using-the-hc-06-bluetooth-module/" class="link_text">Using the HC-06 Bluetooth Module</a><br>
<a href="ttp://www.tec.reutlingen-university.de/uploads/media/DatenblattHC-05_BT-Modul.pdf" class="link_text">Bluetooth Products User Instructional Manual</a><br>

<h3>Tutorials for creating a schematic and a DIY  bluetooth board</h3><br>     
<a href="http://www.elecfreaks.com/wiki/index.php?title=File:Wireless_BTH_05-LRG.jpg" class="link_text">Bluetooth BTH 05 </a><br>
<a href="http://mcuoneclipse.com/2013/02/14/bluetooth-with-the-freedom-board/" class="link_text">Bluetooth with freedom board</a><br>
<a href="http://www.tiny-labs.com/projects/electronics-projects/-part-hc-06-bluetooth-to-serial-adapter" class="link_text">Bluetooth to serial adapter</a></p><br>     

<h3>DIY Bluetooth board</h3>     
<p>It has been very complex to design this kind of boards using Eagle and/or KiCad. In particular it is very difficult to find schematics h about having already installed bluetooth modules.
So, I conceived an un-conventional activity: I designed the Bluetooth board using Illustrator. Looking datasheets and using the graphic elements of the Hello Echo board (pin heard, resistors, led, and button) I created a board that can be host an MH-10 Bluetooth module in order to use it as a a board.</p><br>

<img src="images/esercitazione14/bluetooth.png">
<img src="images/esercitazione14/bluetooth-module.png"><br>
      
<p>The DIY blueooth board works and I connect it to my Google Nexus 5. The smartphone detects the Bluetooth immediately recognising HMSoft. To digit "0000000" as a password it is possible to connect the bluetooth module. More problematic is to connect the Bluetooth to my Mac. So, I try to find an alternative.<br>
I take a Bluetooth Module HC-05, an Arduino Uno and a Potentiomter. I connect all three elements as follow.
Importing a serial library I have been trasformed pin 10 and pin 11 into new RX and TX serial.
I create a serial event on Arduino IDE simulating an ultrasonar sensor. The potentiometer, simulating the ultrasonar, can be observed on my smartphone and on the serial monitor of Arduino. So, I simulate an event. turning the potentiometer more than a value >500 the led is light off. In this way I have the right signal (or better, the alarm) that can be sent to a smartphone application to informing the biker for a possible danger.</p><br>

<img src="images/esercitazione14/testwithpotentiometer.png">
<img src="images/esercitazione14/smartphoneandpotentiometer.png"><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/JRSIrHicWS0" frameborder="0" allowfullscreen></iframe><br>
      
<pre class="prettyprint linenums">
   
#include <SoftwareSerial.h>// import the serial library
SoftwareSerial Genotronex(10, 11); // RX, TX
int led = 13;

void setup() {

  Genotronex.begin(9600);
  Serial.begin(9600);
  Genotronex.println("Welcome to PoliFactory");
  pinMode(led, OUTPUT);
}

void loop() {
  float SonarValue = 0;
  float GasValue = 0;

  SonarValue = analogRead(A0);

  Genotronex.print("Sonar Value =");
  Serial.println(SonarValue);
  Genotronex.println(SonarValue);
  if (SonarValue > 500)
  {
    digitalWrite(led, HIGH);
  }
  else
  {
    digitalWrite(led, LOW);
  }

  delay(100);
}

}</pre><br>

<p>A problem has been represented by the impossible connection between Bluetooth and Mac Book. For this reason, I abandoned my first purpose (simplifying the assignemnt) trying tyo create a GUI directly connected with the potentiometer. So I started from another existing example in Arduino:</p><br>

<pre class="prettyprint linenums">

This example code is in the public domain.

 http://www.arduino.cc/en/Tutorial/Graph
 */

void setup() {
  // initialize the serial communication:
  Serial.begin(9600);
}

void loop() {
  // send the value of analog input 0:
  Serial.println(analogRead(A0));
  // wait a bit for the analog-to-digital converter 
  // to stabilize after the last reading:
  delay(30);
}

</pre><br>
     
<h3>Approaching Processing</h3> 
<p>Firstly I tried to used the basic tutorial for Processing provided by FabAcademy. I modified some parameters in order to understand how to create a basic interface. The final goal is create  a GUI to simulate the basic interface for my final project. I created a small window with a black circle. The circle change its size (scaling up and down) turning the potentiometer simulating the distance.</p><br>

<pre class="prettyprint linenums">

// Graphing sketch
// This program takes ASCII-encoded strings
// from the serial port at 9600 baud and graphs them. It expects values in the
// range 0 to 1023, followed by a newline, or newline and carriage return
// Created 20 Apr 2005
// Updated 18 Jan 2008
// by Tom Igoe
// This example code is in the public domain.

import processing.serial.*;
PFont f;
Serial myPort;        // The serial port
int xPos = 1;         // horizontal position of the graph

void setup () {
  // set the window size:
  size(400, 300);        
  f = createFont("Helvetica", 16, true);
  // List all the available serial ports
  println(Serial.list());
  // I know that the first port in the serial list on my mac
  // is always my  Arduino, so I open Serial.list()[0].
  // Open whatever port is the one you're using.
  myPort = new Serial(this, Serial.list()[5], 9600);
  // don't generate a serialEvent() unless you get a newline character:
  myPort.bufferUntil('\n');
  // set inital background:
  background(0);
}
void draw () {
  background(255);
  textFont(f, 32);                
  fill(0);  
  textAlign(CENTER);   
  text("BIG=NEAR!!", width/2, height/2);  
  String inString = myPort.readStringUntil('\n');

  if (inString != null) {
    // trim off any whitespace:
    inString = trim(inString);
    // convert to an int and map to the screen height:
    float inByte = float(inString); 
    inByte = map(inByte, 0, 1023, 0, height);
    ellipse (200, 150, inByte, inByte);
    fill(127, 34, 155);
    println ( inByte );
  }
}
</pre><br>

<iframe width="560" height="315" src="https://www.youtube.com/embed/ZhKyrW1t1z4" frameborder="0" allowfullscreen></iframe>
<br>

<p>Finally, I tried to connect the interface with the Sharp infrared sensor installed on my Multitiny board developed during the output devices class.</p><br>

<iframe width="560" height="315" src="https://www.youtube.com/embed/EDhMPw-0YSE" frameborder="0" allowfullscreen></iframe><br>

<h3>Lesson learnt</h3>
<p>During the development of this assignment I had a lot of problems. I start to approach to Python and Kivy but I have not the basic knowledge to manage the complexity required by this kind of softwares. Processing is more similar to Arduino IDE and for this reason it is more simple. Anyway, at the end of this assignment I started to understand how to make and connect input/output devices and interfaces. But I need to invest more and more time to become a practitioner in the field of coding.</p>  

        

        

	<!-- Do not touch this! -->
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="media/jquery-1.9.1.min.js"></script>
    
    <!-- Syntax Highlighter -->
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js">
    </script>
    <!-- From https://github.com/jmblog/color-themes-for-google-code-prettify -->
    <link href="media/github.css" type="text/css" rel="stylesheet">
	<script type="text/javascript">
	  !function ($) {
		$(function(){
		  window.prettyPrint && prettyPrint()   
		})
	  }(window.jQuery)
	</script>
	
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="bootstrap/js/ie10-viewport-bug-workaround.js"></script>

  </body>
</html>
