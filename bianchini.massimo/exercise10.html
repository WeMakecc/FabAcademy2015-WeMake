<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Name Surname">
    <link rel="icon" href="media/favicon.ico">

    <title>Fab Academy 2015 - Massimo Bianchini</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="media/fabacademy.css" rel="stylesheet">
         <link href="media/stilemassimo.css" rel="stylesheet"> 
      <link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    
    <!-- 3D files viewer -->
    <script type="text/javascript" src="media/jsc3d_ie.min.js"></script>
	<script type="text/javascript" src="media/jsc3d.min.js"></script>
    <script type="text/javascript" src="media/jsc3d.webgl.js"></script>
    <script type="text/javascript" src="media/jsc3d.touch.js"></script>

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="bootstrap/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="bootstrap/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- Load the menu file -->
    <script>
	function menu() {
					  $('#exercises').load("exercises-menu.html");
					  $('#project').load("project-menu.html");
					  $('#cclicense').load("license.html");
					  }
	</script>

  </head>

  <body onload="menu()">

    <!-- Static navbar -->
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">Massimo Bianchini</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="about.html">About</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Exercises <span class="caret"></span></a>
              <ul id="exercises" class="dropdown-menu" role="menu">
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Final Project <span class="caret"></span></a>
              <ul id="project" class="dropdown-menu" role="menu">
              </ul>
            </li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

	<!-- Insert your content here below! -->


<h2>Exercise 10 - Input devices</h1>

<h3>Assignment</h3>

<p></p>Measure something: add a sensor to a microcontroller board that you've designed and read it</p><br>

<p>I focused my INPUT assignment on the development of the FabKit Exercise. I will use the FabKit for my final project. So i decide to make it understand how I could use it.
I decide to create a double version of the Fabkit 3.0 and 4.0 following the tutorial published on FabAcademy website (http://fabacademy.org/archives/2015/doc/projects/fabkit-0.4.html)
The version 4.0 has been created using the Trotec Laser Flexxi CO2. The first version 3.0 has been created together with Costantino Bongiorno in order to mill the board using a Shapeoko. All the parameters to mill the FabKit boards have been developed using fabmodules.org finding a good set-up through a long experimentation work (and a lot of trial and errors).</p><br>
      
<h3>Studying FabKit and Atmega 328</h3>
<p>Studying all features reading the Atmel Datasheet of Atmega328 studying all the pinouts. It has been fundamental in order to understand how a microcontroller is conceived and what it its structure. I design a schema to remind me all the connerctions.</p><br>

<img src="images/esercitazione10/letturatraces.jpg"><br>
            
<h3>The Fabkit 4.0</h3>
<p>The Fabkit4.0 has been cutted using the Trotec Laser at OpenDot Makerspace. It is a very easy process. The final aspect of the board is almost perfect. It has been relatively easy to solder and install all the component. Also the debug has been very simple.<p><br>

<img src="images/esercitazione10/fabkit04.jpg"><br>

<h3>The Fabkit 3.0</h3>
<p>Shapeoko is a low cost desktop milling machine. For this reason, it has been very interesting to set-up the parameters for milling boards. I supported Costantino Bongiorno (Lab Manager at WeMake) to set-up the final parameters for milling FabKits. The debug of Shapeoko Fabkit has been more a little bit more problematic because the traces are not so perfect and defined.</p><br>

<img src="images/esercitazione10/shapeoko.jpg">
<img src="images/esercitazione10/fabkitshapeoko.jpg">
<img src="images/esercitazione10/fabkit3.jpg"><br>
      
<h3>The Fabkit 3.0 traces</h3>
<img src="images/esercitazione10/Fabkit_Shapeoko_modified.zip">
<img src="images/esercitazione10/FabKit_Shapeoko_traces_cut_holes.zip">
<img src="images/esercitazione10/Shapeoko Milling Parameters.zip"><br>

<img src="images/esercitazione10/fabkit3and4.jpg"><br>

<h3>Programming the FabKit 3.0/4.0</h3>
<p>I use Arduino IDE 1.6.4 connecting the FabISP with the Fabkit. I follow all the instructions of the tutorial.
First step i make the Burn Bootloader using the following code.</p>

<pre class="prettyprint linenums">

##############################################################

fabduino.name=Fabkit/Fabduino w/ ATmega328 (internal clock)

fabduino.upload.protocol=stk500v1
fabduino.upload.maximum_size=14336
fabduino.upload.speed=19200

fabduino.bootloader.low_fuses=0xe2
fabduino.bootloader.high_fuses=0xdd
fabduino.bootloader.extended_fuses=0x00
fabduino.bootloader.path=arduino:atmega
fabduino.bootloader.file=atmega/ATmegaBOOT_168_atmega328_pro_8MHz.hex
fabduino.bootloader.unlock_bits=0x3F
fabduino.bootloader.lock_bits=0x0F

fabduino.build.mcu=atmega328p
fabduino.build.f_cpu=8000000L

fabduino.build.core=arduino:arduino
fabduino.build.variant=arduino:standard

fabduino.upload.tool=arduino:avrdude
fabduino.bootloader.tool=arduino:avrdude

}</pre></p><br>

<p>Second step is use a simple sketch (the blink) to check the board. I change more and more times the delay in order to change the on/off of the Led.  

<pre class="prettyprint linenums">

/*
  Blink
  Turns on an LED on for one second, then off for one second, repeatedly.

  Most Arduinos have an on-board LED you can control. On the Uno and
  Leonardo, it is attached to digital pin 13. If you're unsure what
  pin the on-board LED is connected to on your Arduino model, check
  the documentation at http://arduino.cc

  This example code is in the public domain.

  modified 8 May 2014
  by Scott Fitzgerald
 */


// the setup function runs once when you press reset or power the board
void setup() {
  // initialize digital pin 13 as an output.
  pinMode(10, OUTPUT);
}

// the loop function runs over and over again forever
void loop() {
  digitalWrite(10, HIGH);   // turn the LED on (HIGH is the voltage level)
  delay(5000);              // wait for a second
  digitalWrite(10, LOW);    // turn the LED off by making the voltage LOW
  delay(5000);              // wait for a second
}
</pre></p>  

<img src="images/esercitazione10/blink.jpg">
<img src="images/esercitazione10/blinkandprogramming.jpg"><br>

            
<h3>Trying sensors for the final project</h3>
<p>I used Arduino Uno and also the FabKit trying sensors for my final project. infrared (GP2Y0A21 distance sensor) and Ultrasonar (Maxbotix Maxsonar).Read values from Sharp GP2Y0A21 distance sensor and output to serial Sharp Distance Sensor GP2Y0A21 (10-80cm), Sharp Distance Sensor GP2Y0A21 (10-80cm, 3.1V at 10cm to 0.3V at 80cm)
<p><br>

<img src="images/esercitazione10/infraredsharp.jpg"><br>

<pre class="prettyprint linenums">
*/
int ir_sensor = A0;
void setup() {
  //initialize serial communications at 9600 bps
  Serial.begin(9600);
}
void loop() {
  int sensor_value = analogRead(ir_sensor);  //read the sensor value
  Serial.println(sensor_value); //print the sensor vlue
  delay(500); //delay 500ms (0.5 second)
}</pre><br>


<p>MaxSonarMaxBotix</p>
<pre class="prettyprint linenums">

void setup() {
  
  Serial.begin(9600);
  pinMode(13, OUTPUT);
}

void loop() {
  float SonarValue=0; 
  SonarValue = analogRead(A0);
  //float value=pow(116.6020682*(sensorValue2/41763),(-2.769034857));
  //float value=pow(10,((220-sensorValue2*1000)+158.631)/62.877 );  
  delay(100);
  Serial.println(SonarValue);
  pinMode(13, HIGH);
  else
  pinMode(13,LOW);
}

</pre></p><br>

<img src="images/esercitazione10/maxsonarfabkit.jpg"><br>


	<!-- Do not touch this! -->
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="media/jquery-1.9.1.min.js"></script>
    
    <!-- Syntax Highlighter -->
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js">
    </script>
    <!-- From https://github.com/jmblog/color-themes-for-google-code-prettify -->
    <link href="media/github.css" type="text/css" rel="stylesheet">
	<script type="text/javascript">
	  !function ($) {
		$(function(){
		  window.prettyPrint && prettyPrint()   
		})
	  }(window.jQuery)
	</script>
	
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="bootstrap/js/ie10-viewport-bug-workaround.js"></script>

  </body>
</html>
