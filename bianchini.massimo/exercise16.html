<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Name Surname">
    <link rel="icon" href="media/favicon.ico">

    <title>Fab Academy 2015 - Massimo Bianchini</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
<link href="media/fabacademy.css" rel="stylesheet">
         <link href="media/stilemassimo.css" rel="stylesheet"> 
      <link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    
    
    <!-- 3D files viewer -->
    <script type="text/javascript" src="media/jsc3d_ie.min.js"></script>
	<script type="text/javascript" src="media/jsc3d.min.js"></script>
    <script type="text/javascript" src="media/jsc3d.webgl.js"></script>
    <script type="text/javascript" src="media/jsc3d.touch.js"></script>

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="bootstrap/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="bootstrap/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- Load the menu file -->
    <script>
	function menu() {
					  $('#exercises').load("exercises-menu.html");
					  $('#project').load("project-menu.html");
					  $('#cclicense').load("license.html");
					  }
	</script>

  </head>

  <body onload="menu()">

    <!-- Static navbar -->
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">Massimo Bianchini</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="about.html">My profile</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Exercises <span class="caret"></span></a>
              <ul id="exercises" class="dropdown-menu" role="menu">
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Final Project <span class="caret"></span></a>
              <ul id="project" class="dropdown-menu" role="menu">
              </ul>
            </li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

	<!-- Insert your content here below! -->


     <h2>Exercise 16 - Mechanical design, machine design</h1>
    
<h3>The Granatina Machine </h3>
<p> Costantino Bongiorno, Sabina Barcussi and Massimo Bianchini at WeMake FabLab decide to design a machine to pick up liquids. The Granatina Machine uses a sirynge to pick a certain quantity of liquid from a vase A and releasing it into a Vase B. In its possible future development this machine could be used to calculate in a precise way the components for molding and casting activities. Or in alternative to prepare cocktails.</p>
    
<img src="images/esercitazione16/pickingmachine.jpg"><br>
        
<p> All three collaborate to develop this machine. In particular:
<li> Sabina has mainly focused her work on developing the E axis and the system to pick the liquid using the syringe. </li>
<li> Costantino has mainly worked on developing the X and Z axis and connecting the gestalt nodes. </li>
<li> Massimo has mainly worked on the first developing on the general concept of the machine and then in the development of the GUI and the algorithm (or better, learning how to make it). this part of the assignment will be rapidly implemented </li></p><br>        
        
<h3>The Gestalt Nodes </h3>
 <p> We follow all the tutorials to use FaBnet, and develop Gestalt nodes for the three axis. Starting from the tutorials. Moreover, a first version of the machine has been prototyped laser cutting cardboard and drawing the first version of a basic GUI to command the steppers </p><br>
        
<img src="images/esercitazione16/01Gestaltnodessetup.jpg"><br>
<img src="images/esercitazione16/02Gestaltnodestest.jpg"><br>  
        
<h3>Assembling the machine</h3>
 <p> All the axis have been firstly developed using cardboard in order to verify how work. Due to the particular structure of this machine the final three axis have been redesigned using plywood which has been cut using the laser. Finally the machine has been assembled. </p><br> 
        
<img src="images/esercitazione16/03eaxisassembling.jpg"><br>
<img src="images/esercitazione16/04axisassembled.jpg"><br>
    
<h3>Testing the machine</h3>
<p>We follow all the instructions from various tutorials in the Fab academy archive. We download Python, then install wxGestalt in order to control and command the gestalt nodes and moving the machine.
We use the template provided by the tutorial to move the nodes in order to test the machine. The final GUI has to be implemented as follow. Nodes 1 (X axis) has been tested alone to understand how to command and move it. Finally the same procedure has been adopted for the other three axis and finally Granatina works.</p>

<img src="images/esercitazione16/05axistest.jpg"><br>
<img src="images/esercitazione16/06machineassembled.jpg"><br>
    
<h3>Video</h3>
<iframe width="420" height="315" src="https://www.youtube.com/embed/izE_69ddklE" frameborder="0" allowfullscreen></iframe>

<h3>Problems with GUI and template</h3>       
<p>I tried many times to install wxGestalt and working to the template in two directions in order to complete the task. When I tried install the WxGestalt using terminal, as suggested by the tutorial, I had a lot of problems. I analyze in dept the template to find a solution, just to move the three Axis, I decide to intervene directly on the template manually focusing on the part of the template.sketch which move and control the 3 nodes as follow:
<li>Action A: Move X, Z, and E axis to the origin. X0, Z0, E0 (the position of vase A)</li>
<li>Action B – Pick-up liquid from vase a using a syringe. Z and E axis will be commanded to pick a certain quantity of water from the vase A.</li>
<li>Moving Z axis from Z0 to Z-1 (immerging the syringe into vase A)</li>
<li>Moving E axis from E0 to E1 for X seconds (picking up Y quantity of water)</li>
<li>Action C – Move liquid from vase A to B.</li>
<li>Moving Z axis from Z-1 to Z0</li>
<li>Move X axis from X1 to X2</li>
<li>Action D – Release liquid to vase B using a syringe (opposite to action B)</li>
<li>Moving Z axis from Z0 to Z-1 (immerging the syringe into vase A)</li>
<li>Moving E axis from E0 to E-1 for X seconds (releasing Y quantity of water)</li>
<li>Action E – Move X, Z, and E axis to the origin. X0, Z0, E0 (the position of vase A)</li></p>
        
<p>In this way we find the temporary solution to calculate the basic movement of the steppers in order to run the machine.
    
<pre class="prettyprint linenums">

# -*- coding: utf-8 -*-
#Â License: Public Domain (use it as you like!)

#Â Import main wxPython libraries
import wx
import wx.xrc
#Â Import the wxGestalt module for Gestalt Machines
import Machines.wxMachines as wxMachines


###########################################################################
## Class wxGestaltPanel
###########################################################################

class wxGestaltPanel(wx.Panel):
    '''
    This is the main class for the app that will be launched in the fifth tab.
    Do not rename the class, or wxGestalt won't open it in the tab.
    Please remember: if you print anything, it will go out to the second tab
    (2. Identify the nodes). So please add a text widget and update its value
    in order to show some text / values in the GUI.
    '''

    def __init__( self, parent ):
        '''
        This function initialize the interface. Add all your GUI elements here.
        The self.myMachine object is the machine you initialized in the first two tabs.
        Don't change it or it won't work. The self.launch_button will launch your
        code, change only its position.
        '''
        #Â Initialize the panel that contains all the GUI elements
        #Â Don't change this!
        wx.Panel.__init__ ( self, parent, id = wx.ID_ANY,
        pos = wx.DefaultPosition, size = wx.Size( 500,300 ),
        style = wx.TAB_TRAVERSAL )

        # Load the machine edited in the main app.
        #Â Don't change this!
        self.myMachine = self.GetParent().myMachine

        #Â Create sizers for organizing the GUI elements here
        self.mainSizer = wx.BoxSizer( wx.VERTICAL )
        #Â ...

        #Â Create GUI elements here
        txt1 = "Just a text element to show you how to create GUI widgets..."
        st1 = wx.StaticText(self, label=txt1, style=wx.ALIGN_CENTRE)
        #Â ...

        #Â Add GUI elements to the sizer here
        self.mainSizer.Add(st1, flag=wx.ALL, border=5)
        # ...

        #Â Bind events to GUI widgets here
        #Â ...

        #Â Add a button for launching your app.
        #Â You should only change the position of this!
        self.launch_button = wx.Button( self, wx.ID_ANY, u"Run", wx.DefaultPosition, wx.DefaultSize, 0 )
        self.mainSizer.Add( self.launch_button, 0, wx.ALL, 5 )
        self.launch_button.Bind( wx.EVT_BUTTON, self.On_Run )

        #Â Set up sizers and layout
        #Â Don't change this!
        self.SetSizer( self.mainSizer )
        self.Layout()

    def On_CalculateMoves(self):
        '''
        Add here the function for calculating the move instructions to be sent to the machine.
        '''

        #Â Add here your algorithm
        #Â ...

        # Store here the final moves from your algorithm
        #Â The code below is just an example on how to structure the moves
        #Â according to the number of nodes
        if self.myMachine.nodesNumber == 1:
            moves = [[10],[20],[10],[0]]
        elif self.myMachine.nodesNumber == 2:
            moves = [[10,10],[20,20],[10,10],[0,0]]
        elif self.myMachine.nodesNumber == 3:
            moves = [[0,0,0],[0,80,0],[0,80,30],[0,0,30],[110,0,30],[110,40,30],[110,30,0],[110,0,0],[0,0,0]]
        elif self.myMachine.nodesNumber == 4:
            moves = [[10,10,10,10],[20,20,20,20],[10,10,10,10],[0,0,0,0]]

        #Â Return the value
        return moves

    def On_Run(self, event):
        '''
        This function will finally control the machine after you press the "Run" button.
        Do not change this function.
        '''
        #Â This will calculate the moves for your machine
        moves = self.On_CalculateMoves()
        #Â This will send the moves to the machine
        self.myMachine.moveMachine(moves)
</pre></p>
        
<p>To create a simple GUI which have 6 buttons integrating in the template the simplest solution is create two buttons for each Axis in order to manually move the stepper as follow:
<li>X Axis: Button “-“ (less) and “+” (more)</li>
<li>Z Axis: Button “-“ (down) and “+” (up)</li>
<li>E Axis Button “-“ (down) and “+” (up)</li>
<li> Home Button: X0, Z0, E0</li></p><br>        
        
<h3>Lesson learnt</h3>
<p>I am spending a lot of time to learn ho to use Python developing very simple exercises but the level of my knowledge is too low. I tried to start from simple exercises but I need to invest more and more time to learn the basic principles of Python.</p>

	<!-- Do not touch this! -->
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="media/jquery-1.9.1.min.js"></script>
    
    <!-- Syntax Highlighter -->
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js">
    </script>
    <!-- From https://github.com/jmblog/color-themes-for-google-code-prettify -->
    <link href="media/github.css" type="text/css" rel="stylesheet">
	<script type="text/javascript">
	  !function ($) {
		$(function(){
		  window.prettyPrint && prettyPrint()   
		})
	  }(window.jQuery)
	</script>
	
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="bootstrap/js/ie10-viewport-bug-workaround.js"></script>

  </body>
</html>
